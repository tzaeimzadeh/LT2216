<?xml version="1.0" encoding="UTF-8"?>
<vxml version="2.1">

  <nomatch>
    <property name="timeout" value="3s"/>
    Sorry I didn't understand
    <reprompt/>
  </nomatch>

  <noinput>
    <property name="timeout" value="3s"/>
    You didn't say anything.
    <reprompt/>
  </noinput>

  <form id="singVerse">
    <field name="singVerse">
    <prompt>
      <break/>
      Listen carefully
      <break/>
    </prompt>
    <audio src="{{verse[0]}}"/>
    <prompt>
      <break/>
      What movie is the song from?
    </prompt>
    <grammar xml:lang="en-us">
      <rule id="verseGrammar">
        <one-of>
          {% for x in lyrics %}
          <item> {{x}}
            <tag>
            {% if x == verse[1] %}
            out="correct”
            {% else %}
            out = "incorrect”
            {% endif %}
            </tag>
          </item>
          {% endfor %}
          <item> i don't know </item>
        </one-of>
      </rule>
    </grammar>
    </field>
    <filled>
    <if cond="singVerse=='i don't know'">
      <prompt>ok let's try another song</prompt>
      <submit next="sing_verse"/>
      <elseif cond="singVerse==correct"/>
      <prompt>nice job, see how you do on this next song</prompt>
      <submit next="sing_verse"/>
      <!-- <else/>
      if more than x number of times, move on? -->
    </if>
    </filled>
  </form>
  
  <link next="menu"> 
    <grammar mode="voice" version="1.0" root="root">
      <rule id="root" scope="public">
        <one-of>
	        <item> start over </item>
          <item> menu </item>
	        <item> quit </item>
        </one-of>
      </rule>
    </grammar>
  </link>

</vxml>
